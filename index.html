<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Animal Quiz</title>

<style>
body {
  margin: 0;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #fff7e6;
  text-align: center;
}

h1 { font-size: 26px; }

.question {
  font-size: 22px;
  margin: 16px 0;
}

.animals {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 14px;
}

.animal {
  background: #fff;
  border-radius: 20px;
  padding: 20px;
  font-size: 40px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  cursor: pointer;
  user-select: none;
}

.message {
  font-size: 22px;
  margin-top: 16px;
}

.stars {
  font-size: 24px;
  margin-top: 10px;
}
</style>
</head>

<body>

<h1>Animal Quiz üêæ</h1>
<div class="question" id="question"></div>
<div class="animals" id="animals"></div>
<div class="message" id="message"></div>
<div class="stars" id="stars"></div>

<script>
const animals = [
  { emoji: "üê∂", en: "dog" },
  { emoji: "üê±", en: "cat" },
  { emoji: "üêò", en: "elephant" },
  { emoji: "üê∞", en: "rabbit" },
  { emoji: "ü¶Å", en: "lion" },
  { emoji: "üêº", en: "panda" },
  { emoji: "üê∏", en: "frog" },
  { emoji: "üêµ", en: "monkey" },
  { emoji: "üêÆ", en: "cow" }
];

let correct;
let stars = 0;

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function newQuestion() {
  correct = animals[Math.floor(Math.random() * animals.length)];
  document.getElementById("question").textContent =
    `Which is "${correct.en}"?`;

  const area = document.getElementById("animals");
  area.innerHTML = "";

  shuffle([...animals]).forEach(a => {
    const div = document.createElement("div");
    div.className = "animal";
    div.textContent = a.emoji;

    // üëá iPhoneÂØæÂøúÔºöonclick„ÅÆ„Åø„ÉªÂç≥Âá¶ÁêÜ
    div.addEventListener("click", () => check(a));

    area.appendChild(div);
  });
}

function updateStars() {
  let reward = "";
  if (stars >= 9) reward = "üéâ ÁâπÂà•„Åä„ÇÑ„Å§ÔºÅ";
  else if (stars >= 6) reward = "üç¶ „Ç¢„Ç§„ÇπÔºÅ";
  else if (stars >= 3) reward = "üç¨ „Ç∞„ÉüÔºÅ";

  document.getElementById("stars").textContent =
    "‚≠ê " + stars + "„Åì " + reward;
}

function speak(word) {
  if (!("speechSynthesis" in window)) return;

  const u = new SpeechSynthesisUtterance(word);
  u.lang = "en-US";
  speechSynthesis.cancel(); // ‚Üê iPhoneÂøÖÈ†à
  speechSynthesis.speak(u);
}

function check(animal) {
  if (animal.en === correct.en) {
    stars++;
    document.getElementById("message").textContent = "Correct! ‚≠ê";

    // üëá „É¶„Éº„Ç∂„ÉºÊìç‰ΩúÁõ¥Âæå„Å´Èü≥Â£∞ÔºàÈáçË¶ÅÔºâ
    speak(correct.en);
    updateStars();

    if (stars >= 9) {
      document.getElementById("question").textContent = "üéä ALL CLEAR!";
      return;
    }

    setTimeout(newQuestion, 600);
  } else {
    document.getElementById("message").textContent = "Try again!";
  }
}

updateStars();
newQuestion();
</script>

</body>
</html>

